<% @district.elections.each do |e| %>
  <%= e.year %><br>
  <% ceds = CandidateElectionDistrict.where(district_id: @district.id, election_id: e.id).order(votes_total: :desc) %>
  <table>
    <thead>
      <th>Candidate</th>
      <th>Party</th>
      <th>Total Votes</th>
      <th>Percent</th>
    </thead>
    <% ceds.each do |ced| %>
      <tr>
        <% candidate = Candidate.find(ced.candidate_id) %>
        <td><%= candidate.name %></td>
        <td>(<%= candidate.party.abbr %>)</td>
        <td><%= ced.votes_total %></td>
        <td><%= ced.votes_percent %>%</td>
      </tr>
    <% end %>
  </table>
  <br>
<% end %>

  <div id="myfirstchart" style="height: 250px; width: 250px;"></div>
  <script>
    new Morris.Line({
      // ID of the element in which to draw the chart.
      element: 'myfirstchart',
      // Chart data records -- each entry in this array corresponds to a point on
      // the chart.
      data: [
        { year: '2008', votes: 20 },
        { year: '2009', votes: 10 },
        { year: '2010', votes: 5 },
        { year: '2011', votes: 5 },
        { year: '2012', votes: 20 }
      ],
      // The name of the data record attribute that contains x-values.
      xkey: 'year',
      // A list of names of data record attributes that contain y-values.
      ykeys: ['votes'],
      // Labels for the ykeys -- will be displayed when you hover over the
      // chart.
      labels: ['Votes']
    });
  </script>