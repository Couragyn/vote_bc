  <div id="electionGraph"></div>
  <div id="legend"></div>

<script>
  var electionGraph = Morris.Line({
    element: 'electionGraph',
    data: <%= @district.get_graph_data %>,
    xkey: 'year',
    ykeys: ['BCEX', 'BCM', 'CHP', 'CP', 'GP', 'LIB', 'NDP', 'Other'],
    labels: ['BCEX', 'BCM', 'CHP', 'CP', 'GP', 'LIB', 'NDP', 'Other'],
    hideHover: 'auto',
    continuousLine: true,
    postUnits: '%',
    xLabels: 'year',
    resize: 'true',
  });

  electionGraph.options.labels.forEach(function(label, i){
  var legendItem = $('<span></span><br>').text(label).css('color', electionGraph.options.lineColors[i])
  $('#legend').append(legendItem)
  })
</script>